<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>用户订单</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/static/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="/static/css/ionicons.min.css">
    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="/static/plugins/iCheck/all.css">
    <!-- Bootstrap Color Picker -->
    <link rel="stylesheet" href="/static/css/bootstrap-colorpicker.min.css">
    <!-- Select2 -->
    <link rel="stylesheet" href="/static/select2/dist/css/select2.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/static/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="/static/css/skins/_all-skins.min.css">

</head>

<div class="modal fade" id="set_odds_info">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">修改赔率信息</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div class="row">
                        <input type="hidden" id="u_lotto_id" name="extra" value="">
                        <input type="hidden" id="u_method_code" name="extra" value="">
                        <input type="hidden" id="u_play_code" name="extra" value="">
                        <div class="col-sm-3">
                            <label>彩票</label>
                            <input type="text" id="u_lotto_name" class="form-control" disabled>
                        </div>
                        <div class="col-sm-3">
                            <label>玩法</label>
                            <input type="text" id="u_method_code_name" class="form-control" disabled>
                        </div>
                        <div class="col-sm-3">
                            <label>玩法项</label>
                            <input type="text" id="u_play_code_name" class="form-control" disabled>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>赔率</label>
                                <div class="input-group">
                                    <input type="text" class="form-control text-red" id="u_odds">
                                    <span class="input-group-btn">
                                  <button type="button" onclick="save_odds()" class="btn btn-primary btn-flat">保存</button>
                                </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>最低赔率</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="u_odds_min">
                                    <span class="input-group-btn">
                                  <button type="button" onclick="save_odds_min()" class="btn btn-primary btn-flat">保存</button>
                                </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>最高赔率</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="u_odds_max">
                                    <span class="input-group-btn">
                                  <button type="button" onclick="save_odds_max()" class="btn btn-primary btn-flat">保存</button>
                                </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>最低额度</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="u_bet_min">
                                    <span class="input-group-btn">
                                  <button type="button" onclick="save_bet_min()" class="btn btn-primary btn-flat">保存</button>
                                </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>最高额度</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="u_bet_max">
                                    <span class="input-group-btn">
                                  <button type="button" onclick="save_bet_max()" class="btn btn-primary btn-flat">保存</button>
                                </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <label>状态</label>
                            <div class="input-group">
                                <select id="u_status" class="form-control select2" style="width: 100%;">
                                    <option value=0>禁用</option>
                                    <option value=1>启用</option>
                                </select>
                                <span class="input-group-btn">
                                  <button type="button" onclick="save_status()" class="btn btn-primary btn-flat">保存</button>
                            </span>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <label>显示</label>
                            <div class="input-group">
                                <select id="u_is_show" class="form-control select2" style="width: 100%;">
                                    <option value=0>否</option>
                                    <option value=1>是</option>
                                </select>
                                <span class="input-group-btn">
                                  <button type="button" onclick="save_is_show()" class="btn btn-primary btn-flat">保存</button>
                            </span>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->


<body class="hold-transition skin-blue sidebar-mini">

<!-- Content Header (Page header) -->
<section class="content-header">
    <div class="row">
        <div class="col-sm-2">
            <div class="form-group">
                <label for="name">账户名</label>
                <input type="text" class="form-control " id="name" placeholder="">
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label for="name">期号</label>
                <input type="text" class="form-control " id="issue" placeholder="">
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label for="name">订单号</label>
                <input type="text" class="form-control " id="order_id" placeholder="">
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label>彩票名称</label>
                <select id="lotto_id" class="form-control select2" style="width: 100%;"></select>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label>玩法</label>
                <select id="method_code" class="form-control select2 " style="width: 100%;"></select>
            </div>
        </div>
        <div class="col-md-1">
            <div class="form-group">
                <label>状态</label>
                <select id="status" class="form-control select2" style="width: 100%;">
                    <option value="">全部</option>
                    <option value=0>未结算</option>
                    <option value=1>中奖</option>
                    <option value=2>未中奖</option>
                    <option value=3>撤销</option>
                    <option value=4>异常</option>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            <div class="form-group">
                <label>时间类型</label>
                <select id="status" class="form-control select2" style="width: 100%;">
                    <option value=0>下单时间</option>
                    <option value=1>结算时间</option>
                </select>
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label>起始时间</label>
                <div class="input-group date">
                    <div class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                    </div>
                    <input type="text" class="form-control pull-right" id="start_at">
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label>截止时间</label>
                <div class="input-group date">
                    <div class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                    </div>
                    <input type="text" class="form-control pull-right" id="end_at">
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label>操作</label>
                <div class="row">
                    <button onclick="query_order()" type="button" class="btn btn-primary " style="width: 100%;">查询</button>
                </div>
            </div>
        </div>
    </div>

</section>

<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-body">
                    <div class="row">
                        <table id="lotto_odds_table" class="table table-bordered table-hover  table_style table-striped">
                            <thead>
                            <tr>
                                <th class="text-center">彩票<br>期号</th>
                                <th class="text-center">账号名</th>
                                <th class="text-center">单号</th>
                                <th class="text-center">玩法</th>
                                <th class="text-center">下单内容</th>
                                <th class="text-center">下单金额</th>
                                <th class="text-center">中奖金额</th>
                                <th class="text-center">盈亏</th>
                                <th class="text-center">下单时间</th>
                                <th class="text-center">状态</th>
                                <th class="text-center">操作</th>
                            </tr>
                            </thead>
                            <tbody id="login_data" class="text-center"></tbody>
                        </table>
                    </div>
                </div>
                <!-- /.row -->
            </div>
            </div>
        </div>
    </div>
    <!-- /.row -->
</section>
<!-- /.content -->


<!-- ./wrapper -->


<!-- jQuery 3 -->
<script src="/static/js/jquery.min.js"></script>
<!--<script src="/js/jquery-3.2.1.js"></script>-->
<!-- Bootstrap 3.3.7 -->
<script src="/static/js/bootstrap.min.js"></script>
<!-- DataTables -->
<script src="/static/datatables.net/js/jquery.dataTables.js"></script>
<script src="/static/datatables.net-bs/js/dataTables.bootstrap.js"></script>

<!-- Select2 -->
<script src="/static/select2/dist/js/select2.full.min.js"></script>
<!-- SlimScroll -->
<script src="/static/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- iCheck 1.0.1 -->
<script src="/static/plugins/iCheck/icheck.min.js"></script>
<!-- FastClick -->
<script src="/static/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="/static/js/adminlte.min.js"></script>
<script src="/static/ckeditor/ckeditor.js"></script>

<!-- page script -->
<script src="/static/laydate/laydate.js"></script>
<script type="text/javascript" src="/static/laydate/laydate.js"></script>
<script type="text/javascript" src="/static/js/utils.js"></script>
<script type="text/javascript" src="/static/js/sys_def.js"></script>
<script type="text/javascript" src="/static/js/bootbox.min.js"></script>

<script type="text/javascript">
    var CODE_LOTTO_LIST = [];
    var LOTTO_METHOD_TEMPLATE_LIST = [];
    var LOTTO_ODDS_LIST = [];
    $(function () {
        $('.select2').select2();
        refresh_code_lotto();
        refresh_lotto_method();

        laydate.render({
            elem: '#start_at' //指定元素
            ,type: 'datetime'
            ,theme: '#393D49'
            ,value: get_current_day_begin_time()
        });
        laydate.render({
            elem: '#end_at' //指定元素
            ,type: 'datetime'
            ,theme: '#393D49'
            ,value: get_current_day_end_time()
        });
        laydate.render({
            elem: '#add_start_at' //指定元素
            ,type: 'datetime'
            ,theme: '#393D49'
            ,value: get_current_day_begin_time()
        });
        laydate.render({
            elem: '#add_end_at' //指定元素
            ,type: 'datetime'
            ,theme: '#393D49'
            ,value: get_current_day_end_time()
        });


        $("#lotto_id").on("select2:select",function(){
            var lotto_id = $(this).val();
            var lotto_type = "";
            for(var i=0;i<CODE_LOTTO_LIST.length;i++) {
                if (CODE_LOTTO_LIST[i].lotto_id === Number(lotto_id)){
                    lotto_type = CODE_LOTTO_LIST[i].lotto_type
                }
            }

            var data = [{id:"",text:"全部"}];
            for(var i=0;i<LOTTO_METHOD_TEMPLATE_LIST.length;i++) {
                if (LOTTO_METHOD_TEMPLATE_LIST[i].lotto_type === Number(lotto_type)){
                    data.push({id: LOTTO_METHOD_TEMPLATE_LIST[i].method_code, text: LOTTO_METHOD_TEMPLATE_LIST[i].name});
                }
            }

            var $select = $('#method_code');
            var instance;
            instance = $select.data('select2');
            if(instance){
                $select.select2('destroy').empty();
            }
            $('#method_code').select2({
                dropdownAutoWidth: true,
                multiple: false,
                data: data
            });
        });

        $('#set_odds_info').on('show.bs.modal', function (event) {

            var modal_data = $(event.relatedTarget); // Button that triggered the modal
            var lotto_id = modal_data.data('lotto_id');
            var method_code = modal_data.data('method_code');
            var play_code = modal_data.data('play_code');
            var param = {};
            param.lotto_id = lotto_id;
            param.method_code = method_code;
            param.play_code = play_code;

            $.ajax({
                type: "GET",
                url: "/lotto/odds",
                data: param,
                dataType: 'json',
                success: function(rsp) {
                    if(rsp.code === SYS_DEF.CODE.SUCCESS){

                        $('#u_lotto_id').val(rsp.data.lotto_id);
                        $('#u_method_code').val(rsp.data.method_code);
                        $('#u_play_code').val(rsp.data.play_code);
                        $('#u_method_code_name').val(rsp.data.method_name);
                        $('#u_play_code_name').val(rsp.data.play_name);
                        $('#u_odds').val(rsp.data.odds);
                        $('#u_odds_min').val(rsp.data.odds_min);
                        $('#u_odds_max').val(rsp.data.odds_max);
                        $('#u_bet_min').val(rsp.data.bet_min);
                        $('#u_bet_max').val(rsp.data.bet_max);

                        var lotto_name = "";

                        for(var i=0;i<CODE_LOTTO_LIST.length;i++) {
                            if (CODE_LOTTO_LIST[i].lotto_id === rsp.data.lotto_id){
                                lotto_name = CODE_LOTTO_LIST[i].name;
                            }
                        }
                        $('#u_lotto_name').val(lotto_name);
                        $('#u_status').val(rsp.data.status).trigger("change");
                        $('#u_status').change();
                        $('#u_is_show').val(rsp.data.is_show).trigger("change");
                        $('#u_is_show').change();
                    }
                }
            });

        });

    })
</script>
<script>
    var myTable;
    myTable = $("#lotto_odds_table").DataTable({
        language: datatable_lang,  //提示信息
        autoWidth: false,  //禁用自动调整列宽
        bSort: false,
        stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
        // processing: true,  //隐藏加载提示,自行处理
        serverSide: true,  //启用服务器端分页，即开启后端分页
        searching: false,  //禁用原生搜索
        lengthChange: false,
        // destroy: true,
        ordering: false,
        order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
        columns: [
            {"data": "issue", "width": "110px"},
            {"data": "name", "width": "100px"},
            {"data": "order_id", "width": "100px"},
            {"data": "lotto_id", "width": "100px"},
            {"data": "bet_content", "width": "110px"},
            {"data": "amount", "width": "100px"},
            {"data": "payout", "width": "110px"},
            {"data": "profit", "width": "110px"},
            {"data": "bet_time", "width": "110px"},
            {"data": "status", "width": "100px"},
            {"data": null, "width": "100px"},
        ],
        columnDefs: [
            {
                "render": function(data, type, row, meta) {
                    var lotto_name = "";
                    for(var i=0;i<CODE_LOTTO_LIST.length;i++) {
                        if (CODE_LOTTO_LIST[i].lotto_id === row.lotto_id){
                            lotto_name = CODE_LOTTO_LIST[i].name;
                        }
                    }
                    return lotto_name+'<br>第<span class="text-green">'+row.issue+'</span>期';
                },
                "targets": 0
            }, {
                "render": function(data, type, row, meta) {
                    return row.name;
                },
                "targets": 1
            }, {
                "render": function(data, type, row, meta) {
                   return row.order_id;
                },
                "targets": 2
            }, {
                "render": function(data, type, row, meta) {

                    var method_name = "";

                    for(var i=0;i<LOTTO_METHOD_TEMPLATE_LIST.length;i++) {
                        if (LOTTO_METHOD_TEMPLATE_LIST[i].method_code === row.method_code){
                            method_name = LOTTO_METHOD_TEMPLATE_LIST[i].name;
                        }
                    }
                    return '<span class="text-light-blue">' + method_name + '</span>' + '-'+ '<span class="text-light-blue">' +row.play_code+'</span>' +'@<strong class="text-red">'+ row.odds +'</strong>';

                },
                "targets": 3
            },{
                "render": function(data, type, row, meta) {

                    return row.bet_content;

                },
                "targets": 4
            }, {
                "render": function(data, type, row, meta) {

                    return row.amount;

                },
                "targets": 5
            }, {
                "render": function(data, type, row, meta) {

                    return row.payout;

                },
                "targets": 6
            }, {
                "render": function(data, type, row, meta) {

                    return row.profit;

                },
                "targets": 7
            }, {
                "render": function(data, type, row, meta) {
                    return format_time(row.bet_time);
                },
                "targets": 8
            },{
                "render": function(data, type, row, meta) {
                    if (row.status === 0){
                        return '<span class="label label-default">未结算</span>';
                    }else if(row.status === 1){
                        return '<span class="label label-success">中奖</span>';
                    }else if(row.status === 2){
                        return '<span class="label label-info">未中奖</span>';
                    }else if(row.status === 3){
                        return '<span class="label label-warning">撤销</span>';
                    }else if(row.status === 4){
                        return '<span class="label label-danger">异常</span>';
                    }
                    return row.status;

                },
                "targets": 9
            }, {
                "render": function(data, type, row, meta) {
                    var html_str = '<div class="btn-group"><button class="btn btn-primary btn-xs" data-toggle="modal" data-target="#set_odds_info" data-play_code="'+row.play_code +'" data-lotto_id="'+row.lotto_id +'" data-method_code="'+row.method_code +'">详情</i></button></div>';
                    return html_str
                },
                "targets": 10
            }
        ],
        ajax:function(data, callback, settings){
            var param = {};
            //其他的参数
            param.page_row = data.length;//页面显示记录条数，在页面显示每页显示多少项的时候
            // param.start = data.start;//开始的记录序号
            param.curr_page = (data.start / data.length)+1;//当前页码
            param.draw = data.draw+1;//当前页码

            var lotto_id = $('#lotto_id').val();
            var method_code = $('#method_code').val();
            var status = $('#status').val();
            var is_show = $('#is_show').val();

            if (lotto_id > ""){
                param.lotto_id = lotto_id
            }
            if (method_code > ""){
                param.method_code = method_code
            }
            if (status > ""){
                param.status = status
            }
            if (is_show > ""){
                param.is_show = is_show
            }

            var url = "/pages/lotto/order/list";

            $.ajax({
                type: "GET",
                url: url,
                data: param,    //传入已封装的参数
                dataType: "json",
                success: function(result) {
                    //setTimeout仅为测试延迟效果
                    setTimeout(function(){
                        //异常判断与处理
                        if (result.code !== SYS_DEF.CODE.SUCCESS) {
                            bootbox.alert("查询失败。错误码："+result.code + ";内容:" + result.msg);
                            return;
                        }
                        $("#login_data tr").remove();

                        //封装返回数据，这里仅演示了修改属性名
                        var returnData = {};
                        returnData.draw = result.data.draw;//这里直接自行返回了draw计数器,应该由后台返回
                        returnData.recordsTotal = result.data.total_count;
                        returnData.recordsFiltered = result.data.total_count;//后台不实现过滤功能，每次查询均视作全部结果
                        if (result.data.record_data === null){
                            returnData.data = []
                        }else {
                            returnData.data = result.data.record_data;
                        }

                        if (result.data.total_count > 0){
                            callback(returnData);
                        }else {
                            TableDataIsNull('login_data');
                        }

                    },200);
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    bootbox.alert("查询失败");
                }
            });
        },
    });

    function refresh_code_lotto() {
        $.ajax({
            type: "GET",
            url: "/lotto/code_lotto/list",
            data: {},
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    var data = [{id: "", text: "全部"}];
                    CODE_LOTTO_LIST = rsp.data;
                    for(var i=0;i<rsp.data.length;i++) {
                        data.push({id: rsp.data[i].lotto_id, text: rsp.data[i].name});
                    }
                    var $select = $('#lotto_id');
                    var instance;
                    instance = $select.data('select2');
                    if(instance){
                        $select.select2('destroy').empty();
                    }
                    $('#lotto_id').select2({
                        dropdownAutoWidth: true,
                        multiple: false,
                        data: data
                    });

                }
            }
        });
    }

    function refresh_lotto_method() {
        $.ajax({
            type: "GET",
            url: "/lotto/method_template/list",
            data: {},
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    LOTTO_METHOD_TEMPLATE_LIST = rsp.data;


                    var data = [{id: "", text: "全部"}];
                    for(var i=0;i<rsp.data.length;i++) {
                        data.push({id: rsp.data[i].method_code, text: rsp.data[i].name});
                    }

                    var $select = $('#method_code');
                    var instance;
                    instance = $select.data('select2');
                    if(instance){
                        $select.select2('destroy').empty();
                    }
                    $('#method_code').select2({
                        dropdownAutoWidth: true,
                        multiple: false,
                        data: data
                    });
                }
            }
        });
    }

    function query_order() {
        myTable.ajax.reload();
    }

    function save_odds() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.odds = $('#u_odds').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }
    function save_odds_min() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.odds_min = $('#u_odds_min').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }
    function save_odds_max() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.odds_max = $('#u_odds_max').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }
    function save_bet_min() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.bet_min = $('#u_bet_min').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }
    function save_bet_max() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.bet_max = $('#u_bet_max').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }
    function save_status() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.status = $('#u_status').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }
    function save_is_show() {
        var lotto_id = $('#u_lotto_id').val();
        var method_code = $('#u_method_code').val();
        var play_code = $('#u_play_code').val();
        var param = {};
        param.lotto_id = lotto_id;
        param.method_code = method_code;
        param.play_code = play_code;

        param.is_show = $('#u_is_show').val();


        if (lotto_id <= ""){
            bootbox.alert("彩票编号不能为空");
            return;
        }
        if (method_code <= ""){
            bootbox.alert("玩法不能为空");
            return;
        }
        if (play_code <= ""){
            bootbox.alert("玩法项不能为空");
            return;
        }

        $.ajax({
            type: "POST",
            url: "/lotto/odds/set",
            data: param,
            dataType: 'json',
            success: function(rsp) {
                if(rsp.code === SYS_DEF.CODE.SUCCESS){
                    bootbox.alert(rsp.msg || "操作成功")
                }else {
                    bootbox.alert(rsp.msg||"操作失败")
                }
            }
        });

    }

</script>

</body>
</html>
